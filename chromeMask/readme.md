# chrome内核 - 遮罩效果 #

## 整体说明 ##

`mask` 属性是 webkit 内核私自扩展的一个CSS3属性，支持的浏览器有 `opera`、`chrome`、`safari` 。
`mask` 含义就是遮罩，你可以理解成PS中的通道概念，不过它与PS中通道概念相反，在PS的通道中如果某块区域的颜色是黑色，那么这块对应的图片内容便是不可见的，但是如果通道中某块区域是透明的那么对应的图片内容则是可见的。
而在 `mask` 属性中，它的概念则是相反，`mask` 属性中透明表示不可见，而不透明则是表示内容可见。

总之应用了`mask`属性的元素，其内容的可见性以及可见程度，都由 `mask` 属性内容的透明与否以及透明程度来决定了，而 `mask` 属性目前可接受的值主要有以下几种：

* png图片
* svg
* 渐变(css3)

## mask_bg.png 说明 ##

mask_bg.png 是一个带有透明通道的png图片，并且全图由40个小图组成，这些小图我们可以称之为 “帧”，因此整个 mask\_bg.png 就是一个序列帧组合的精灵图。
为了能让 mask_bg.png 中的每个帧都能在一屏上显示，所以使用 `mask-size:4000% 100%` 将遮罩图片缩放了4000倍，这样每张图片都是以100%的宽度与100%的高度在一屏中显示。

## 动画说明 ##

css3的animate属性会根据动画的时长来在我们定义的帧之间插入补间动画，这样是为了让动画具有过度效果。
但是往往有的场合下我们需要的是每一帧都是按照我们设定的帧去播放，而不是自动插入的补间帧。特别是在播放一个序列帧图片实现的动画，更是我们迫切需要的了。
`steps` 就可以很容易解决这一问题，通过设置 `steps(number)` 来明确指定在两个帧之间插入多少补间动画。
先来看下我定义的动画:

```css
@keyframes mask{
	0%{
		-webkit-mask-position:0% 0%;
	}
	100%{
		-webkit-mask-position:100% 0%;
	}
}
```

在这里我就定义了两个帧，一个 `0%` 最后一个 `100%` 而我的序列帧组合的图片中却有40帧，其中减去我默认已经显示的第一帧，加上最后一帧，也就是说我还有39帧没有播放，所以我在调用动画的 `animation` 进行如下定义:

```css
-webkit-animation:mask 1.5s steps(39) infinite;
```

最后 `mask-position` 则控制了这个序列帧图片当前播放的是哪一帧，`0%` 便是第一帧，`100%` 便是最后一帧，最终使用 `animation ` 来执行这个动画。